# 线性规划上机习题——问题1

## 1 问题重述

某厂生产甲乙两种产品，每百箱甲产品需用原料 6 千克，工人 10 名，可获利 10 万元；每百箱乙产品需用原料 5 千克，工人 20 名，可获利 9 万元。现如今 工厂共有原料 60 千克，工人 150 名，又由于其他条件所限，甲产品产量不超过 8 百箱。问：如何安排生产计划，即两种产品各生产多少使得获利最大。并且请进一步讨论：
（1）若投资 0.8 万元可增加原料 1 千克，问是否作这项投资？
（2）若每百箱甲产品获利可增加 1 万元，问是否改变生产计划？

## 2 变量设置

现设该工厂生产甲种产品数量为 $x_1$ （单位：百箱），生产乙种产品数量为 $x_2$ （单位：百箱）。

## 3 模型建立

对于最优获利问题，可确定最大化目标函数：$max \; f = 10x_1 + 9x_2$。接着考虑题目中提到的约束条件：

1. 产品原料约束：$6x_1 + 5x_2 \le 60$.
2. 工人数量约束：$10x_1 + 20x_2 \le 150$.
3. 产品数量约束：$0 \le x_1 \le 8, \, x_2 \ge 0$.

综合上述，可以建立数学模型：

$$
\begin{aligned}
max \; & f = 10x_1 + 9x_2 \\
s.t.\; & 6x_1 + 5x_2 \le 60 \\
 & 10x_1 + 20x_2 \le 150 \\
 & 0 \le x_1 \le 8, \, x_2 \ge 0 \\
\end{aligned}
$$

### 3.1 问题求解

方法1: 由于仅有两个决策变量，进而可以使用图解法求解，如下图所示：

 ![20211011](https://picofwwzy-1307689287.cos.ap-shanghai.myqcloud.com/uPic/20211011.png =500x400)

方法2: lingo 求解，程序代码如下：

```matlab
model:
max = 10*x1 + 9*x2;
[material] 6*x1 + 5*x2 < 60;
[worker] 10*x1 + 20*x2 < 150;
[cpct] x1 < 8;
end
```

运行结果：

```
  Variable           Value        Reduced Cost
        X1        6.428571            0.000000
        X2        4.285714            0.000000

       Row    Slack or Surplus      Dual Price
         1        102.8571            1.000000
  MATERIAL        0.000000            1.571429
    WORKER        0.000000           0.5714286E-01
      CPCT        1.571429            0.000000
```

方法3：Matlab 求解，程序代码如下：

```matlab
f = [10 9];
A = [6 5;10 20;1 0];
b = [60;150;8];
lb = zeros(2,1);
[x, fval] = linprog(-f, A, b, [], [], lb, []);
```

运行结果（注意由于`linprog`适用最小化问题，求解时将取`-f`，最终结果`fval`将取负号）：

```matlab
x = 6.4286 4.2857
fval = -102.8571
```

最终，在实际问题中，将得到的结果取整，可知该工厂应该生产甲种产品 643 箱，乙种产品 428 箱，获利 102.82 万元。

## 4 问题延伸 

### 4.1 对于讨论1

问题：若投资 0.8 万元可增加原料 1 千克，问是否作这项投资？

分析 lingo 求解所得结果，其中原料的“影子价格”（Dual Price）约为 1.57 万元，即在其余约束条件不变的情况下，原料每增加1千克，获利可增加 1.57 万元。因此，若投资 0.8 万元可增加原料 1 千克，增加原料 1 千克仍可获利 0.77 万元，故应该作这项投资。

继续延伸可以追问，最多可以投资购买多少原料不至于亏本呢？这个问题的结果无法直接从 lingo 的结果数据中看出来，但不难求解，只需增加变元 $x_3$ 作为投资购买原料的数量，将模型转化为：

$$
\begin{aligned}
max \; & f = 10x_1 + 9x_2 - 0.8*x_3\\
s.t.\; & 6x_1 + 5x_2 - x_3 \le 60 \\
 & 10x_1 + 20x_2 \le 150 \\
 & 0 \le x_1 \le 8, \, x_2 \ge 0 \\
\end{aligned}
$$

利用 lingo 求解可以得到如下结果：

```
  Variable           Value        Reduced Cost
        X1        8.000000            0.000000
        X2        3.500000            0.000000
        X3        5.500000            0.000000

       Row    Slack or Surplus      Dual Price
         1        107.1000            1.000000
  MATERIAL        0.000000           0.8000000
    WORKER        0.000000           0.2500000
      CPCT        0.000000            2.700000
```

因此，可以知道最多可以投资购买原料 5.5 千克，再投资就会亏本了。

### 4.2 对于讨论2

问题：若每百箱甲产品获利可增加 1 万元，问是否改变生产计划？

运用 lingo 进行灵敏性分析（LINGO｜Ranges），可以继续得到如下结果：

```
                Objective Coefficient Ranges:
                    Current        Allowable        Allowable
  Variable      Coefficient         Increase         Decrease
        X1         10.00000        0.8000000         5.500000
        X2         9.000000         11.00000        0.6666667

                       Righthand Side Ranges:
                    Current        Allowable        Allowable
       Row              RHS         Increase         Decrease
  MATERIAL         60.00000         5.500000         22.50000
    WORKER         150.0000         90.00000         22.00000
      CPCT         8.000000         INFINITY         1.571429

```

记 $f(x) = a_1x_1 + a_2x_2$，分析所得结果，可以知道在最优解不变时目标函数的系数允许的变化范围为：

$$
a_1 \in (4.50, 10.80) \quad a_2 \in (8.33, 20.00)
$$

故在其余约束条件不变的情况下，若每百箱甲产品获利增加 1 万元，生产计划要改变。


